-- MySQL Script generated by MySQL Workbench
-- 10/12/20 10:05:19
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema sorveteria
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema sorveteria
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `sorveteria` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `sorveteria` ;

-- -----------------------------------------------------
-- Table `sorveteria`.`sabores`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`sabores` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`tipos_embalagens`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`tipos_embalagens` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `descicao` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`categorias`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`categorias` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `descricao` VARCHAR(45) NOT NULL,
  `valor` DECIMAL(8,2) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`aditivos_naturais`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`aditivos_naturais` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `formula_quimica` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`aditivos_nutritivos_picole`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`aditivos_nutritivos_picole` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_aditivos_naturais` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_aditivos_nutritivos_picole_idx` (`id_aditivos_naturais` ASC),
  CONSTRAINT `fk_aditivos_nutritivos_picole`
    FOREIGN KEY (`id_aditivos_naturais`)
    REFERENCES `sorveteria`.`aditivos_naturais` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`concervantes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`concervantes` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `descricao` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`conserventes_picole`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`conserventes_picole` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_conservantes` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_conserventes_picole_1_idx` (`id_conservantes` ASC),
  CONSTRAINT `fk_conserventes_picole_1`
    FOREIGN KEY (`id_conservantes`)
    REFERENCES `sorveteria`.`concervantes` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`produtos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`produtos` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `id_sabores` INT NOT NULL,
  `id_tipo_embalagens` INT NOT NULL,
  `id_categorias` INT NOT NULL,
  `id_aditivos_nutritivos_picole` INT NOT NULL,
  `id_conservantes_picole` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_produtos_1_idx` (`id_sabores` ASC),
  INDEX `fk_produtos_2_idx` (`id_tipo_embalagens` ASC),
  INDEX `fk_produtos_3_idx` (`id_categorias` ASC),
  INDEX `fk_produtos_5_idx` (`id_aditivos_nutritivos_picole` ASC),
  INDEX `fk_produtos_6_idx` (`id_conservantes_picole` ASC),
  CONSTRAINT `fk_produtos_1`
    FOREIGN KEY (`id_sabores`)
    REFERENCES `sorveteria`.`sabores` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_produtos_2`
    FOREIGN KEY (`id_tipo_embalagens`)
    REFERENCES `sorveteria`.`tipos_embalagens` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_produtos_3`
    FOREIGN KEY (`id_categorias`)
    REFERENCES `sorveteria`.`categorias` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_produtos_5`
    FOREIGN KEY (`id_aditivos_nutritivos_picole`)
    REFERENCES `sorveteria`.`aditivos_nutritivos_picole` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_produtos_6`
    FOREIGN KEY (`id_conservantes_picole`)
    REFERENCES `sorveteria`.`conserventes_picole` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`ingredientes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`ingredientes` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`revendedores`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`revendedores` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `bumero_serie` INT NULL,
  `nome` VARCHAR(45) NOT NULL,
  `nome_fantasia` VARCHAR(45) NOT NULL,
  `cnpj` VARCHAR(18) NOT NULL,
  `inscicao_estadual` VARCHAR(18) NOT NULL,
  `telefone` VARCHAR(15) NOT NULL,
  `email` VARCHAR(30) NOT NULL,
  `Contato` VARCHAR(45) NOT NULL,
  `endereco` VARCHAR(45) NOT NULL,
  `bairro` VARCHAR(45) NOT NULL,
  `cidade` VARCHAR(45) NOT NULL,
  `estado` VARCHAR(2) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`lotes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`lotes` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `valor` DECIMAL(8,2) NOT NULL,
  `id_categorias` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_lotes_1_idx` (`id_categorias` ASC),
  CONSTRAINT `fk_lotes_1`
    FOREIGN KEY (`id_categorias`)
    REFERENCES `sorveteria`.`categorias` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`produtos_nota_fiscal`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`produtos_nota_fiscal` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_lotes` INT NOT NULL,
  `qtd` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_produtos_nota_fiscal_1_idx` (`id_lotes` ASC),
  CONSTRAINT `fk_produtos_nota_fiscal_1`
    FOREIGN KEY (`id_lotes`)
    REFERENCES `sorveteria`.`lotes` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`notas_fiscais`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`notas_fiscais` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `data_emissao` DATE NOT NULL,
  `id_vendedores` INT NOT NULL,
  `id_revendedor` INT NOT NULL,
  `id_produtos_nota_fiscal` INT NOT NULL,
  `valor` DECIMAL(8,2) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_notas_fiscais_1_idx` (`id_revendedor` ASC),
  INDEX `fk_notas_fiscais_2_idx` (`id_produtos_nota_fiscal` ASC),
  CONSTRAINT `fk_notas_fiscais_1`
    FOREIGN KEY (`id_revendedor`)
    REFERENCES `sorveteria`.`revendedores` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_notas_fiscais_2`
    FOREIGN KEY (`id_produtos_nota_fiscal`)
    REFERENCES `sorveteria`.`produtos_nota_fiscal` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `sorveteria`.`ingredientes_produto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `sorveteria`.`ingredientes_produto` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_produto` INT NOT NULL,
  `id_ingredientes` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_ingredientes_produto_1_idx` (`id_ingredientes` ASC),
  INDEX `fk_ingredientes_produto_2_idx` (`id_produto` ASC),
  CONSTRAINT `fk_ingredientes_produto_1`
    FOREIGN KEY (`id_ingredientes`)
    REFERENCES `sorveteria`.`ingredientes` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ingredientes_produto_2`
    FOREIGN KEY (`id_produto`)
    REFERENCES `sorveteria`.`produtos` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
